
* Point Location Wrong

** Repeatable Cause
1. Start emacs -Q
2. Delete the word "buffer"
3. Move up a couple of lines, and delete the word "want".
4. undo
5. Point will be left at where you deleted the word "buffer".

> Also, can you try:
>
> (setq undo-auto--current-boundary-timer t)
>
> and see if that stops it.

No. Still same thing.


* Before Change

** Without undo

Value: (nil
 (#("want" 0 4
    (fontified t face font-lock-comment-face))
  . 39)
 (#<marker at 39 in *scratch*> . -4)
 (#<marker at 39 in *scratch*> . -1)
 (#<marker in no buffer> . -4)
 (#<marker in no buffer> . -4)
 43 nil
 (#("buffer" 0 6
    (fontified t face font-lock-comment-face))
  . 183)
 (#<marker at 39 in *scratch*> . -6)
 (#<marker at 179 in *scratch*> . -4)
 (#<marker at 179 in *scratch*> . -4)
 (#<marker in no buffer> . -6)
 (#<marker in no buffer> . -6)
 189
 (t . 0)
 nil
 (1 . 192)
 (t . 0))


** With Undo


 (nil
 (39 . 43)
 nil
 (#("want" 0 4
    (fontified t face font-lock-comment-face))
  . 39)
 (#<marker at 43 in *scratch*> . -4)
 (#<marker at 40 in *scratch*> . -1)
 (#<marker in no buffer> . -4)
 (#<marker in no buffer> . -4)
 43 nil
 (#("buffer" 0 6
    (fontified t face font-lock-comment-face))
  . 183)
 (#<marker at 43 in *scratch*> . -6)
 (#<marker at 183 in *scratch*> . -3)
 (#<marker at 183 in *scratch*> . -3)
 (#<marker in no buffer> . -6)
 (#<marker in no buffer> . -6)
 189
 (t . 0)
 nil
 (1 . 192)
 (t . 0))


* After Change



** Without Undo

 (nil
 (#("want" 0 4
    (fontified t face font-lock-comment-face))
  . 39)
 (#<marker at 39 in *scratch*> . -4)
 (#<marker at 39 in *scratch*> . -2)
 (#<marker in no buffer> . -4)
 183 nil
 (#("buffer" 0 6
    (fontified t face font-lock-comment-face))
  . 183)
 (#<marker at 39 in *scratch*> . -6)
 (#<marker at 179 in *scratch*> . -2)
 (#<marker at 179 in *scratch*> . -2)
 (#<marker in no buffer> . -6)
 (t . 0)
 nil
 (1 . 192)
 (t . 0))


** With Undo

(nil
 (39 . 43)
 nil
 (#("want" 0 4
    (fontified t face font-lock-comment-face))
  . 39)
 (#<marker at 183 in *scratch*> . -4)
 (#<marker at 41 in *scratch*> . -2)
 (#<marker in no buffer> . -4)
 183 nil
 (#("buffer" 0 6
    (fontified t face font-lock-comment-face))
  . 183)
 (#<marker at 183 in *scratch*> . -6)
 (#<marker at 183 in *scratch*> . -2)
 (#<marker at 183 in *scratch*> . -2)
 (#<marker in no buffer> . -6)
 (#<marker in no buffer> . -6)
 (t . 0)
 nil
 (1 . 192)
 (t . 0))
